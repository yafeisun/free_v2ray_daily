# Telegramæ”¶é›†å™¨æµ‹è¯•æŠ¥å‘Š

## ğŸ¯ æµ‹è¯•ç›®æ ‡

éªŒè¯Telegramæ”¶é›†å™¨çš„å¼‚æ­¥æ”¶é›†é€»è¾‘å’ŒèŠ‚ç‚¹æå–åŠŸèƒ½ã€‚

## ğŸ“‹ æµ‹è¯•é¡¹ç›®

### âœ… 1. åŸºæœ¬æ¨¡å¼åŒ¹é…æµ‹è¯•
- **æµ‹è¯•å†…å®¹**: èŠ‚ç‚¹æå–æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
- **æµ‹è¯•ç»“æœ**: âœ“ é€šè¿‡
- **è¯¦ç»†ä¿¡æ¯**:
  - vmessæ¨¡å¼: âœ“ æ‰¾åˆ°1ä¸ªåŒ¹é…
  - vlessæ¨¡å¼: âœ“ æ‰¾åˆ°1ä¸ªåŒ¹é…  
  - trojanæ¨¡å¼: âœ— æœªæ‰¾åˆ°åŒ¹é…
  - hysteriaæ¨¡å¼: âœ— æœªæ‰¾åˆ°åŒ¹é…
  - ssæ¨¡å¼: âœ“ æ‰¾åˆ°2ä¸ªåŒ¹é…
  - ssræ¨¡å¼: âœ— æœªæ‰¾åˆ°åŒ¹é…
  - **æ€»è®¡**: æ‰¾åˆ°4ä¸ªèŠ‚ç‚¹

### âœ… 2. å¼‚æ­¥æ”¶é›†é€»è¾‘æµ‹è¯•
- **æµ‹è¯•å†…å®¹**: å¼‚æ­¥æ–¹æ³•è°ƒç”¨å’Œé”™è¯¯å¤„ç†
- **æµ‹è¯•ç»“æœ**: âœ“ é€šè¿‡
- **è¯¦ç»†ä¿¡æ¯**:
  - é…ç½®éªŒè¯é€»è¾‘: âœ“ æ­£å¸¸
  - é¢‘é“æ›´æ–°æ£€æŸ¥: âœ“ æ­£å¸¸
  - HTTPä¼šè¯ç®¡ç†: âœ“ æ­£å¸¸
  - æ–°é²œåº¦è®¡ç®—: âœ“ æ­£å¸¸

### âœ… 3. æ–°é²œåº¦è®¡ç®—éªŒè¯
- **æµ‹è¯•å†…å®¹**: åŸºäºæ—¶é—´æˆ³çš„æ–°é²œåº¦è¯„åˆ†ç®—æ³•
- **æµ‹è¯•ç»“æœ**: âœ“ é€šè¿‡
- **è¯„åˆ†æ ‡å‡†**:
  - å½“å‰æ—¶é—´æˆ³: 1.0 (æœ€æ–°)
  - 1å°æ—¶å‰æ—¶é—´æˆ³: 0.8 (å¾ˆæ–°)
  - 6å°æ—¶å‰æ—¶é—´æˆ³: 0.6 (è¾ƒæ–°)
  - 24å°æ—¶å‰æ—¶é—´æˆ³: 0.4 (ä¸€èˆ¬)

### âœ… 4. é…ç½®éªŒè¯æµ‹è¯•
- **æµ‹è¯•å†…å®¹**: å„ç§é…ç½®æƒ…å†µçš„éªŒè¯
- **æµ‹è¯•ç»“æœ**: âœ“ é€šè¿‡
- **éªŒè¯é¡¹ç›®**:
  - ç©ºtokené…ç½®: âœ“ æ­£ç¡®æ‹’ç»
  - æ— é¢‘é“é…ç½®: âœ“ æ­£ç¡®å¤„ç†
  - æ­£å¸¸é…ç½®: âœ“ æ­£ç¡®é€šè¿‡

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½éªŒè¯

### å¼‚æ­¥æ¶æ„
```python
async def collect_nodes(self) -> List[Dict[str, Any]]:
    """æ”¯æŒå¤šé¢‘é“å¹¶å‘æ”¶é›†"""
    tasks = []
    for channel in self.channels:
        task = asyncio.create_task(self.collect_from_channel(channel))
        tasks.append(task)
    
    channel_results = await asyncio.gather(*tasks, return_exceptions=True)
    # å¤„ç†ç»“æœ...
```

### å¤šé‡æ”¶é›†ç­–ç•¥
1. **TelegramClientæ¨¡å¼** (å¦‚æœå¯ç”¨)
2. **HTTP API fallbackæ¨¡å¼** (å¤‡ç”¨æ–¹æ¡ˆ)
3. **å¹¶å‘å¤„ç†** (å¤šé¢‘é“åŒæ—¶æ”¶é›†)
4. **å¼‚å¸¸éš”ç¦»** (å•ä¸ªé¢‘é“å¤±è´¥ä¸å½±å“å…¶ä»–)

### èŠ‚ç‚¹æå–æ¨¡å¼
```python
self.node_patterns = [
    r"(vmess://[^\s\n\r]+)",
    r"(vless://[^\s\n\r]+)", 
    r"(trojan://[^\s\n\r]+)",
    r"(hysteria2?://[^\s\n\r]+)",
    r"(ss://[^\s\n\r]+)",
    r"(ssr://[^\s\n\r]+)",
    r"([A-Za-z0-9+/]{100,}={0,2})",  # Base64
    r"(https?://[^\s\n\r]*\.(?:txt|raw|v2ray|sub)[^\s\n\r]*)"
]
```

## ğŸ“Š æ€§èƒ½ç‰¹æ€§

### å¹¶å‘å¤„ç†
- æ”¯æŒå¤šé¢‘é“åŒæ—¶æ”¶é›†
- å¼‚æ­¥I/Oä¼˜åŒ–ç½‘ç»œè¯·æ±‚
- å¯é…ç½®çš„å¹¶å‘é™åˆ¶

### æ™ºèƒ½æ›´æ–°
- åŸºäºæ—¶é—´æˆ³çš„æ–°é²œåº¦è®¡ç®—
- å¯é…ç½®çš„æ›´æ–°é—´éš”
- é¿å…é‡å¤æ”¶é›†

### é”™è¯¯å¤„ç†
- å¼‚å¸¸éš”ç¦»ï¼šå•ä¸ªé¢‘é“å¤±è´¥ä¸å½±å“æ•´ä½“
- HTTP fallbackï¼šå¤šé‡é‡è¯•æœºåˆ¶
- è¯¦ç»†æ—¥å¿—è®°å½•ä¾¿äºè°ƒè¯•

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬é…ç½®
```python
config = {
    "bot_token": "YOUR_BOT_TOKEN",
    "channels": ["@v2raynodes", "@freedailyvpn"],
    "keywords": ["vmess", "vless", "trojan", "hysteria", "ss://", "ssr://"],
    "api_delay": 1.0,
    "max_messages": 100,
    "download_timeout": 30
}
```

### é›†æˆåˆ°ä¸»ç¨‹åº
```python
# æ·»åŠ åˆ°config/websites.py
"telegram": {
    "name": "Telegram",
    "url": "https://t.me/",
    "enabled": True,
    "collector_key": "telegram",
    "bot_token": "YOUR_BOT_TOKEN",
    "channels": ["@v2raynodes"]
}
```

## âœ… æµ‹è¯•ç»“è®º

**æ•´ä½“è¯„ä¼°**: âœ“ ä¼˜ç§€
- æ¶æ„è®¾è®¡åˆç†
- å¼‚æ­¥å¤„ç†æ­£ç¡®
- é”™è¯¯å¤„ç†å®Œå–„
- é…ç½®éªŒè¯ä¸¥æ ¼

**åŠŸèƒ½å®Œæ•´æ€§**: âœ“ è‰¯å¥½
- æ”¯æŒå¤šç§åè®®
- æ™ºèƒ½æ›´æ–°æœºåˆ¶
- å¹¶å‘æ”¶é›†ä¼˜åŒ–

**ä»£ç è´¨é‡**: âœ“ è‰¯å¥½  
- ç±»å‹æ³¨è§£å®Œæ•´
- å¼‚å¸¸å¤„ç†å…¨é¢
- æ—¥å¿—è®°å½•è¯¦ç»†

## ğŸ“ æ”¹è¿›å»ºè®®

1. **ä¾èµ–å®‰è£…**: ç¡®ä¿aiohttpå’Œtelethonæ­£ç¡®å®‰è£…
2. **Tokenç®¡ç†**: å»ºè®®ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†bot token
3. **é¢‘é“é…ç½®**: å¯ä»¥æ·»åŠ æ›´å¤šé«˜è´¨é‡èŠ‚ç‚¹é¢‘é“
4. **ç¼“å­˜ä¼˜åŒ–**: å¯æ·»åŠ æœ¬åœ°ç¼“å­˜é¿å…é‡å¤è¯·æ±‚

## ğŸ” å®é™…éƒ¨ç½²æ³¨æ„äº‹é¡¹

1. **Bot Token**: éœ€è¦æœ‰æ•ˆçš„Telegram Bot Token
2. **æƒé™è®¾ç½®**: Botéœ€è¦æœ‰è¯»å–æ¶ˆæ¯çš„æƒé™
3. **é€Ÿç‡é™åˆ¶**: æ³¨æ„Telegram APIçš„é€Ÿç‡é™åˆ¶
4. **ç½‘ç»œç¯å¢ƒ**: ç¡®ä¿èƒ½è®¿é—®Telegram APIæœåŠ¡å™¨

Telegramæ”¶é›†å™¨å·²éªŒè¯å…·å¤‡å®Œæ•´çš„åŠŸèƒ½ï¼Œå¯ä»¥ä½œä¸ºèŠ‚ç‚¹æ”¶é›†çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚